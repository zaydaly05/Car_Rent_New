<!DOCTYPE html>
<html lang="en">

<head>
    <title>ShowRoom</title>

    <link rel="stylesheet" href="ShowRoom Styling.css">
</head>

<body>
    <form id="addCarForm" action="/showroom/sedan/add" method="POST" style="margin-bottom: 2em;">
        <!-- ...inputs... -->
        <button type="submit">Add Car</button>
    </form>

    <div id="carList" class="car-list">
        <div class="car-container">
            <div class="car">
                <img src="../../Images/Optera.jpg" alt="Chevrolet Optera">
                <div class="container">
                    <p1> Color: </p1><select>
                        <option> Red</option>
                        <option> Blue</option>
                        <option> Grey</option>
                    </select>

                    <div>Price: 650 EGP per Day </div>
                    <div> 1500 CC </div>
                    <a href="Car Rent Contract form Sedan.html" class="button">Rent</a>
                </div>
            </div>

        </div>

        <div class="car-container">
            <div class="car">
                <img src="../Images/ElAntra.jpg" alt="Hyundai ElAntra">
                <div class="container">
                    <p1> Color: </p1><select>
                        <option> Blue</option>
                        <option> Dark Grey</option>
                    </select>

                    <div>Price: 800 EGP per Day </div>
                    <div> 1500 CC </div>
                    <a href="Car Rent Contract form Sedan.html" class="button">Rent</a>
                </div>
            </div>

        </div>
        <div class="car-container">
            <div class="car">
                <img src="../Images/nissan sunny.jpg" alt="Nissan Sunny">
                <div class="container">
                    <p1> Color: </p1><select>
                        <option> Black</option>
                        <option> Gold</option>
                        <option> Red</option>
                    </select>

                    <div>Price: 850 EGP per Day </div>
                    <div> 2000 CC </div>
                    <a href="Car Rent Contract form Sedan.html" class="button">Rent</a>
                </div>
            </div>

        </div>
        <div class="car-container">
            <div class="car">
                <img src="../Images/toyota yaris.jpg" alt="Toyota Yaris">
                <div class="container">
                    <p1> Color: </p1><select>
                        <option> Black</option>
                        <option> Gold</option>
                    </select>

                    <div>Price: 1000 EGP per Day </div>
                    <div> 2000 CC </div>
                    <a href="Car Rent Contract form Sedan.html" class="button">Rent</a>
                </div>
            </div>

        </div>
        <div class="car-container">
            <div class="car">
                <img src="../Images/chevrolet aveo.jpg" alt="Chevrolet Aveo">
                <div class="container">
                    <p1> Color: </p1><select>
                        <option> Red</option>
                        <option> Yellow</option>
                    </select>

                    <div>Price: 3200 EGP per Day </div>
                    <div> 3000 CC </div>
                    <a href="Car Rent Contract form Sedan.html" class="button">Rent</a>
                </div>
            </div>

        </div>
        <div class="car-container">
            <div class="car">
                <img src="../Images/kia cerato.jpg" alt="KIA Cerato">
                <div class="container">
                    <p1> Color: </p1><select>
                        <option> Red</option>
                        <option> Yellow</option>
                    </select>

                    <div>Price: 3200 EGP per Day </div>
                    <div> 3000 CC </div>
                    <a href="Car Rent Contract form Sedan.html" class="button">Rent</a>
                </div>
            </div>

        </div>
        <div class="car-container">
            <div class="car">
                <img src="../Images/toyota corolla.jpg" alt="Toyota Corolla">
                <div class="container">
                    <p1> Color: </p1><select>
                        <option> Red</option>
                        <option> Yellow</option>
                    </select>

                    <div>Price: 3200 EGP per Day </div>
                    <div> 3000 CC </div>
                    <a href="Car Rent Contract form Sedan.html" class="button">Rent</a>
                </div>
            </div>

        </div>


        </div>
        <div class="car-container">
            <div class="car">
                <img src="../Images/mazda demio.jpg" alt="Mazda Demio">
                <div class="container">
                    <p1> Color: </p1><select>
                        <option> Black</option>
                        <option> Dark Blue</option>
                    </select>

                    <div>Price: 3500 EGP per Day </div>
                    <div> 3000 CC </div>
                    <a href="Car Rent Contract form Sedan.html" class="button">Rent</a>
                </div>
            </div>

        </div>
        <div class="car-container">
            <div class="car">
                <img src="../Images/skoda octavia.jpg" alt="Skoda Octavia">
                <div class="container">
                    <p1> Color: </p1><select>
                        <option> Black</option>
                        <option> Dark Blue</option>
                    </select>

                    <div>Price: 3500 EGP per Day </div>
                    <div> 3000 CC </div>
                    <a href="Car Rent Contract form Sedan.html" class="button">Rent</a>
                </div>
            </div>

        </div>
        <div class="car-container">
            <div class="car">
                <img src="../Images/nissan sentra.jpeg" alt="Nissan Sentra">
                <div class="container">
                    <p1> Color: </p1><select>
                        <option> Black</option>
                        <option> Dark Blue</option>
                    </select>

                    <div>Price: 3500 EGP per Day </div>
                    <div> 3000 CC </div>
                    <a href="Car Rent Contract form Sedan.html" class="button">Rent</a>
                </div>
            </div>

        </div>
    </div>
    <script>
        document.getElementById('addCarForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const form = e.target;
            const data = new FormData(form);

            fetch(form.action, {
                method: 'POST',
                body: data
            })
                .then(res => res.json())
                .then(car => {
                    // Create the new car container HTML
                    const carHtml = `
        <div class="car-container">
            <div class="car">
                <img src="${car.image}" alt="${car.name}">
                <div class="container">
                    <p>Color: 
                        <select>
                            <option>Red</option>
                            <option>Blue</option>
                            <option>Grey</option>
                        </select>
                    </p>
                    <div>Price: ${car.price} EGP per Day</div>
                    <div>${car.type} CC</div>
                    <form action="/rent" method="POST" style="display:inline;">
                        <input type="hidden" name="carId" value="${car._id}">
                        <button type="submit" class="button" onclick="showPopup('car_contract')">Rent</button>
                    </form>
                    <a href="#" style="color:orange; margin-left:8px;" onclick="openEditPopup('${car._id}', '${form.action.replace('/add', '')}'); return false;">
                        <i class='bx bx-edit'></i>
                    </a>
                    <form action="/delete-car" method="POST" style="display:inline;">
                        <input type="hidden" name="carId" value="${car._id}">
                        <input type="hidden" name="redirectTo" value="${form.action.replace('/add', '')}">
                        <button type="submit" style="background:none; border:none; color:red; cursor:pointer;">
                            <i class='bx bx-trash'></i>
                        </button>
                    </form>
                </div>
            </div>
        </div>
        `;
                    // Add the new car to the top of the list
                    document.getElementById('carList').insertAdjacentHTML('afterbegin', carHtml);
                    form.reset();
                })
                .catch(err => alert('Error adding car!'));
        });
    </script>
</body>

</body>

</html>